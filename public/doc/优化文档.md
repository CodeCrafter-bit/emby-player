以下是对 Emby API 教程大纲中 第三项：媒体库浏览接口 的详细讲解，涵盖媒体库结构、常用接口、参数说明与使用示例，适用于你用 React/Electron 开发 Emby 桌面客户端时调用 Emby 服务器获取媒体内容。

⸻

三、媒体库浏览接口详解

Emby 中的媒体库（Library）是组织视频、音乐、照片等内容的基础结构。客户端可通过 API 获取当前用户可见的媒体库及其中的媒体项。

⸻

3.1 获取媒体库列表

接口

GET /Users/{userId}/Views

功能

返回当前用户可访问的媒体库分类，如：
	•	Movies
	•	TV Shows
	•	Music
	•	Photos
	•	Home Videos

请求示例

GET http://your-emby-server:8096/Users/{userId}/Views?api_key={API_KEY}

返回样例

{
  "Items": [
    {
      "Name": "Movies",
      "CollectionType": "movies",
      "Id": "f113a5c5123346b9b3e01aa1e99d8e79",
      "ImageTags": {
        "Primary": "9bcfdd2d3d50e789a173176d9b"
      }
    }
  ]
}

参数说明

参数名	说明
userId	登录用户的 ID
api_key	认证用 API key 或 AccessToken



⸻

3.2 获取某个媒体库下的项目

接口

GET /Users/{userId}/Items

功能

根据条件获取某个库下的媒体项，如所有电影、连续剧等。

常用查询参数

参数	说明
ParentId	上级目录 ID（一般是媒体库的 Id）
Recursive	是否递归子目录，常设为 true
SortBy	排序字段（如 SortName, DateCreated）
SortOrder	Ascending 或 Descending
IncludeItemTypes	指定媒体类型（如 Movie, Series, Episode）

示例请求

GET http://your-emby-server:8096/Users/{userId}/Items?ParentId={libraryId}&IncludeItemTypes=Movie&Recursive=true&SortBy=DateCreated&SortOrder=Descending&api_key={API_KEY}

返回样例

{
  "Items": [
    {
      "Name": "Interstellar",
      "Id": "123456789abcdef",
      "Type": "Movie",
      "ProductionYear": 2014,
      "CommunityRating": 8.5,
      "RunTimeTicks": 10100000000,
      "ImageTags": {
        "Primary": "e876556789ff"
      }
    }
  ]
}



⸻

3.3 获取媒体项详情信息

接口

GET /Items/{itemId}

功能

获取单个媒体项的完整信息（播放路径、分辨率、简介、演员、标签等）。

示例请求

GET http://your-emby-server:8096/Items/{itemId}?api_key={API_KEY}

返回字段说明（部分）

字段	含义
Name	媒体标题
Overview	简介
RunTimeTicks	片长（100纳秒为单位）
MediaStreams	视频、音频、字幕流详情
MediaSources	播放来源（用于后续播放）



⸻

3.4 获取媒体播放信息

接口

POST /Items/{itemId}/PlaybackInfo

功能

请求服务器生成播放信息（如播放地址、是否转码等），是播放前的关键步骤。

请求体示例

{
  "UserId": "your_user_id",
  "MaxStreamingBitrate": 100000000,
  "StartTimeTicks": 0,
  "MediaSourceId": "your_media_source_id"
}

返回示例

{
  "MediaSources": [
    {
      "Id": "abc123",
      "Path": "http://your-emby-server:8096/Items/123456/stream.mp4?api_key=xxx",
      "Container": "mp4",
      "SupportsDirectPlay": true,
      "SupportsTranscoding": true
    }
  ]
}



⸻

3.5 搜索接口

接口

GET /Search/Hints

功能

根据关键字进行媒体搜索（模糊匹配 Name/OriginalTitle）。

示例请求

GET http://your-emby-server:8096/Search/Hints?SearchTerm=matrix&api_key={API_KEY}

返回示例

{
  "SearchHints": [
    {
      "ItemId": "123456",
      "Name": "The Matrix",
      "Type": "Movie"
    }
  ]
}



⸻

媒体封面图获取

封面图不是单独接口调用，而是通过 URL 拼接生成：

http://your-emby-server:8096/Items/{itemId}/Images/Primary?tag={ImageTag}&quality=90

可作为 <img> 标签的 src 直接加载。

⸻

总结：调用流程推荐
	1.	登录获取 Token 与 UserId
	2.	请求 /Users/{userId}/Views 获取媒体库列表
	3.	请求 /Users/{userId}/Items?ParentId={viewId} 获取媒体项
	4.	显示封面、简介等
	5.	点击播放 → 调用 /Items/{itemId}/PlaybackInfo 获取视频播放地址
	6.	使用 video.js 或 <video> 标签播放返回的链接

⸻

如你需要，我可以提供完整代码示例（例如 React 播放组件、封面组件等），或对接某个特定接口的封装模块。你现在打算先实现媒体浏览页、还是播放器功能？
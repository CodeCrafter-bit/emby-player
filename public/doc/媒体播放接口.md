以下是 Emby 播放相关接口的详细文档，适用于使用 Electron 和 React 开发的桌面客户端，帮助你实现媒体播放功能。

⸻

一、获取媒体播放信息

接口路径：

POST /Items/{itemId}/PlaybackInfo

功能：
获取指定媒体项的播放信息，包括播放地址、媒体源、转码支持等。

请求示例：

POST http://your-emby-server:8096/Items/{itemId}/PlaybackInfo?api_key={API_KEY}
Content-Type: application/json

{
  "UserId": "your_user_id",
  "MaxStreamingBitrate": 100000000,
  "StartTimeTicks": 0,
  "MediaSourceId": "your_media_source_id"
}

请求参数说明：
	•	UserId：用户的唯一标识符。 ￼
	•	MaxStreamingBitrate：最大流媒体比特率，单位为比特。
	•	StartTimeTicks：播放起始时间，单位为 100 纳秒。
	•	MediaSourceId：媒体源的唯一标识符。

返回示例：

{
  "MediaSources": [
    {
      "Id": "abc123",
      "Path": "http://your-emby-server:8096/Items/123456/stream.mp4?api_key=xxx",
      "Container": "mp4",
      "SupportsDirectPlay": true,
      "SupportsTranscoding": true
    }
  ]
}

返回字段说明：
	•	Id：媒体源的唯一标识符。
	•	Path：媒体的播放地址。
	•	Container：媒体容器格式，如 mp4、mkv 等。
	•	SupportsDirectPlay：是否支持直接播放。 ￼
	•	SupportsTranscoding：是否支持转码播放。

⸻

二、播放状态上报接口

在播放过程中，客户端应定期向服务器上报播放状态，以便服务器记录播放进度和统计数据。

1. 播放开始上报

接口路径：

POST /Sessions/Playing

功能：
通知服务器开始播放某个媒体项。

请求示例：

POST http://your-emby-server:8096/Sessions/Playing?api_key={API_KEY}
Content-Type: application/json

{
  "ItemId": "123456",
  "MediaSourceId": "abc123",
  "PositionTicks": 0,
  "PlayMethod": "DirectPlay",
  "LiveStreamId": null
}

请求参数说明：
	•	ItemId：媒体项的唯一标识符。
	•	MediaSourceId：媒体源的唯一标识符。
	•	PositionTicks：当前播放位置，单位为 100 纳秒。
	•	PlayMethod：播放方式，如 DirectPlay、Transcode 等。
	•	LiveStreamId：直播流的唯一标识符，非直播可为 null。

2. 播放进度上报

接口路径：

POST /Sessions/Playing/Progress

功能：
定期上报当前播放进度。

请求示例：

POST http://your-emby-server:8096/Sessions/Playing/Progress?api_key={API_KEY}
Content-Type: application/json

{
  "ItemId": "123456",
  "MediaSourceId": "abc123",
  "PositionTicks": 600000000,
  "PlayMethod": "DirectPlay",
  "IsPaused": false,
  "IsMuted": false,
  "VolumeLevel": 100,
  "PlaybackRate": 1.0,
  "SubtitleStreamIndex": null,
  "AudioStreamIndex": 1,
  "LiveStreamId": null
}

请求参数说明：
	•	PositionTicks：当前播放位置，单位为 100 纳秒。
	•	IsPaused：是否暂停。 ￼
	•	IsMuted：是否静音。
	•	VolumeLevel：音量级别，范围 0-100。
	•	PlaybackRate：播放速率，1.0 为正常速度。
	•	SubtitleStreamIndex：当前字幕流索引。
	•	AudioStreamIndex：当前音频流索引。

3. 播放停止上报

接口路径：

POST /Sessions/Playing/Stopped

功能：
通知服务器播放已停止。

请求示例：

POST http://your-emby-server:8096/Sessions/Playing/Stopped?api_key={API_KEY}
Content-Type: application/json

{
  "ItemId": "123456",
  "MediaSourceId": "abc123",
  "PositionTicks": 1800000000,
  "PlayMethod": "DirectPlay",
  "LiveStreamId": null
}

请求参数说明：
	•	PositionTicks：停止时的播放位置，单位为 100 纳秒。

⸻

三、播放地址构建

获取播放信息后，客户端可以使用返回的 Path 字段作为视频源进行播放。例如，在 React 中使用 <video> 标签：

<video controls src="http://your-emby-server:8096/Items/123456/stream.mp4?api_key=xxx" />

确保在请求头中包含必要的认证信息，如 api_key 或 AccessToken。

⸻

四、注意事项
	•	认证方式：Emby 支持多种认证方式，包括 API Key 和 Access Token。确保在请求中包含有效的认证信息。
	•	**播放方式